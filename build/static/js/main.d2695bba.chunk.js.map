{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","personObj","post","put","id","delete","Person","person","persons","setPersons","setFiltered","setNotification","name","number","onClick","idToRemove","window","confirm","personsService","console","log","filter","catch","error","status","text","setTimeout","removePerson","PersonList","filtered","map","PersonForm","newName","setNewName","newNumber","setNewNumber","onSubmit","event","preventDefault","foundPerson","length","Date","now","returnedPerson","concat","value","onChange","target","type","Filter","search","setSearch","toLowerCase","indexOf","Notification","notification","notificationStyle","color","background","borderStyle","borderRadius","padding","fontSize","style","App","useState","useEffect","initialPersons","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d2695bba.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = (personObj) => {\n    const request = axios.post(baseUrl, personObj)\n    return request.then(response => response.data)\n}\n\nconst update = (personObj) => {\n    const request = axios.put(`${baseUrl}/${personObj.id}`, personObj)\n    return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, remove }","import React, { useEffect, useState } from 'react'\nimport personsService from './services/persons'\n\nconst Person = ({ person, persons, setPersons, setFiltered, setNotification }) => {\n\n  const removePerson = (person) => {\n    const idToRemove = person.id\n\n    if (window.confirm(`are you sure you want to delete ${person.name}?`)) {\n      personsService\n        .remove(idToRemove)\n        .then(response => {\n          console.log('response', response)\n          setFiltered(persons.filter(person => person.id !== idToRemove))\n          setPersons(persons.filter(person => person.id !== idToRemove))\n        })\n        .catch(error => {\n          console.log(error.response)\n          if (error.response.status === 404) {\n            setNotification({ text: `${person.name} has already been removed from the phonebook`, error: true })\n            setFiltered(persons.filter(person => person.id !== idToRemove))\n            setPersons(persons.filter(person => person.id !== idToRemove))\n          }\n        else \n          setNotification({ text: `error removing ${person.name}`, error: true})\n        setTimeout(() => {\n          setNotification({ text: null, error: false })\n        }, 5000)\n        })\n    }\n  }\n\n  return (\n    <p>\n      {person.name} {person.number}\n      <button onClick={() => removePerson(person)}>delete</button>\n    </p>\n  )\n}\n\nconst PersonList = ({ filtered, setFiltered, persons, setPersons, setNotification }) => {\n  return (\n    <>\n      {filtered.map(person => \n        <Person key={person.id} person={person} persons={persons} setPersons={setPersons} setFiltered={setFiltered} setNotification={setNotification} />\n      )}\n    </>\n  )\n}\n\nconst PersonForm = ({ persons, setPersons, setFiltered, newName, setNewName, newNumber, setNewNumber, setNotification }) => {\n\n  const handleNameChange = (event) => {\n    const value = event.target.value\n    setNewName(value)\n  }\n\n  const handleNumberChange = (event) => {\n    const value = event.target.value\n    setNewNumber(value)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n\n    let foundPerson = persons.filter(person => person.name === newName)\n\n    if (foundPerson.length > 0) {\n      if (window.confirm(`${newName} is already added to the phonebook, replace the old number with the new one?`)) {\n        foundPerson[0].number = newNumber\n\n        personsService\n          .update(foundPerson[0])\n          .then(response => {\n            setFiltered(persons.map(person => {\n              if (person.id === response.id) return response\n              else return person\n            }))\n            setNotification({ text: `${newName} has had their number changed`, error: false })\n            setTimeout(() => {\n              setNotification({ text: null, error: false })\n            }, 5000)\n            setNewName('')\n            setNewNumber('')\n          })\n          .catch(error => {\n            console.log(error.response)\n            if (error.response.status === 404) {\n              setNotification({ text: `${newName} has already been removed from the phonebook`, error: true })\n              setFiltered(persons.filter(person => person.id !== foundPerson[0].id))\n              setPersons(persons.filter(person => person.id !== foundPerson[0].id))\n            } else {\n              setNotification({ text: `error changing number for ${newName}`, error: true})\n            }\n\n            setTimeout(() => {\n              setNotification({ text: null, error: false })\n            }, 5000)\n            setNewName('')\n            setNewNumber('')\n          })\n      }\n    } else {\n      const personObj = {\n        id: Date.now(),\n        name: newName,\n        number: newNumber\n      }\n\n      personsService\n        .create(personObj)\n        .then(returnedPerson => {\n          setFiltered(persons.concat(returnedPerson))\n          setPersons(persons.concat(returnedPerson))\n          setNotification({ text: `added ${newName} to the phonebook`, error: false})\n          setTimeout(() => {\n            setNotification({ text: null, error: false })\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          console.log(error.response)\n          setNotification({ text: `error adding ${newName} to the phonebook`, error: true})\n          setTimeout(() => {\n            setNotification({ text: null, error: false })\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n    }\n  }\n\n  return (\n    <form onSubmit={addPerson}>\n    <div>\n      <p>name: <input value={newName} onChange={handleNameChange} /></p>\n      <p>number: <input value={newNumber} onChange={handleNumberChange} /></p>\n    </div>\n    <div>\n      <button type=\"submit\">add</button>\n    </div>\n  </form>\n  )\n}\n\nconst Filter = ({ persons, setFiltered, search, setSearch }) => {\n\n  const handleSearch = (event) => {\n    const value = event.target.value\n    setSearch(value)\n    setFiltered(persons.filter(person => \n      person.name.toLowerCase().indexOf(value.toLowerCase()) !== -1))\n  }\n\n  return (\n    <p>filter shown with <input search={search} onChange={handleSearch} /></p>\n  )\n}\n\nconst Notification = ({ notification }) => {\n  const color = notification.error ? 'red' : 'green'\n  const notificationStyle = {\n    color: color,\n    background: 'lightgrey',\n    borderStyle: 'solid',\n    borderRadius: '5px',\n    padding: '10px',\n    fontSize: 20\n  }\n\n  if (notification.text === null) return null\n  else return (\n    <div style={notificationStyle}>\n      {notification.text}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [filtered, setFiltered] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [search, setSearch] = useState('')\n  const [notification, setNotification] = useState({ text: null, error: false })\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(initialPersons => {\n        setPersons(initialPersons)\n        setFiltered(initialPersons)\n      })\n      .catch(error => {\n        console.log('error getting phonebook', error)\n      })\n  }, [])\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification notification={notification} />\n      <Filter persons={persons} setFiltered={setFiltered} search={search} setSearch={setSearch} />\n      <h3>add a new</h3>\n      <PersonForm \n        persons={persons} setPersons = {setPersons}\n        filtered={filtered} setFiltered={setFiltered}\n        newName={newName} setNewName={setNewName} \n        newNumber={newNumber} setNewNumber={setNewNumber} \n        setNotification={setNotification}\n      />\n      <h3>Numbers</h3>\n      <PersonList filtered={filtered} setFiltered={setFiltered} persons={persons} setPersons={setPersons} setNotification={setNotification} />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}